{"blocks":[{"id":"9E91BA49-4356-4F41-95C8-4B883C0FA8E0","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"410C3385-D7B2-4BF9-808A-96446D29E158","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0},{"id":"BC410B8F-1397-4C2E-8AE8-9B50697705AE","type":"ShowBlock","disabled":false,"name":"output2","displayName":"Output 2","comment":"","childId":"9CC9B2BB-3A1A-44D4-BC8D-CB4B44BB4AED","inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | [{$.DoReload.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes | [LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":7980},{"id":"B04B126E-E6B2-4A33-9436-D1AC5D9D17BD","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest2","displayName":"Qlik Cloud Services - Raw API Request 2","comment":"Retrieve app information","childId":"ED02D806-E3AF-4290-B465-93A7EAB94E28","inputs":[{"id":"734cbcc0-bbb0-11f0-b998-f73920377683","value":"v1/items","type":"string","structure":[]},{"id":"7322a550-bbb0-11f0-9c8c-43f143a32456","value":"7341e840-bbb0-11f0-9bb8-11c201f87b6d","type":"select","displayValue":"GET","structure":[]},{"id":"73000fe0-bbb0-11f0-8a80-59ece3571bd9","value":[],"type":"object","mode":"keyValue","structure":[]},{"id":"736fae60-bbb0-11f0-ad62-c98a0046f418","value":[{"key":"resourceId","value":"{ $.loop2.item }"},{"key":"resourceType","value":"app"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1300,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"72d48530-bbb0-11f0-875a-b322bf237aeb","endpoint_role":"create"},{"id":"C36C81F1-8375-4539-8E4A-CB8C469C2AB3","type":"SnippetBlock","disabled":false,"name":"DoReload","displayName":"Qlik Cloud Services - Do Reload","comment":"Attempt the reload","childId":"8B7EA497-A610-4E94-B20E-C980F3B6835D","inputs":[{"id":"29603390-e716-11ea-9e37-05e08ee32111","value":"{ $.loop3.item }","type":"string","structure":[]},{"id":"2ac9eef0-a677-11eb-aacc-8b755d0fe484","value":"Wait for reload to complete","type":"select","displayValue":"Wait for reload to complete","structure":[]},{"id":"6892c0c0-c795-11eb-9860-9dc8cb705e25","value":null,"type":"select","structure":[]},{"id":"ecebf340-c797-11eb-8671-53658babb1a1","value":null,"type":"select","structure":[]},{"id":"069de770-8277-11f0-a252-ad6769632a1c","value":null,"type":"select","structure":{}},{"id":"06a02bd0-8277-11f0-b78b-f7910663702f","value":null,"type":"object","mode":"keyValue","structure":{}},{"id":"cc8dd1c0-a438-11f0-9e17-c77404b63446","value":null,"type":"select","structure":{}}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue Automation and report errors","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":3720,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"b5dbb7a0-e715-11ea-b2bf-43bb35adee19"},{"id":"F9C88113-1710-4582-B931-47B32F49ED6A","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":null,"inputs":[{"id":"input","value":"| {$.iter} | [{$.rawAPIRequest2.data[0].name}]({$.tenantHostname}/item/{$.rawAPIRequest2.data[0].id}/details) |[{$.getSpace.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest2.data[0].spaceId}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":1620},{"id":"ED62B2CB-B5D7-48EE-996B-E80E9E6A316C","type":"IfElseBlock","disabled":false,"name":"condition3","displayName":"Condition 3","comment":"Was reload succesful?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.DoReload.status}","input2":"SUCCEEDED","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":240,"y":4080,"childTrueId":"DB454954-723F-475E-8A85-4EE3D45C0DCB","childFalseId":"18D858E5-E01D-4C65-BF10-A6DB71FA495E"},{"id":"16512D23-467E-4BBF-94CE-3107F542867A","type":"VariableBlock","disabled":false,"name":"iterReloadsFailed","displayName":"Variable - iterReloadsFailed","comment":"","childId":"17BB8D2E-8823-4067-B610-55E40FA89A16","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":7620,"variableGuid":"F942EDDF-15A0-4AF2-8228-9BACD5BED741","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"33AAA356-C861-4850-8969-27A3D3E387BD","type":"EndpointBlock","disabled":false,"name":"rawAPIRequest3","displayName":"Qlik Cloud Services - Raw API Request 3","comment":"Retrieve the app information by fetching the item ","childId":"AA6CB73F-D3B1-49E2-B520-E3542DA4C060","inputs":[{"id":"734cbcc0-bbb0-11f0-b998-f73920377683","value":"v1/items","type":"string","structure":[]},{"id":"7322a550-bbb0-11f0-9c8c-43f143a32456","value":"7341e840-bbb0-11f0-9bb8-11c201f87b6d","type":"select","displayValue":"GET","structure":[]},{"id":"73000fe0-bbb0-11f0-8a80-59ece3571bd9","value":[],"type":"object","mode":"keyValue","structure":[]},{"id":"736fae60-bbb0-11f0-ad62-c98a0046f418","value":[{"key":"resourceId","value":"{ $.loop3.item }"},{"key":"resourceType","value":"app"}],"type":"object","mode":"keyValue","structure":[]}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue Automation and report errors","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":2360,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"72d48530-bbb0-11f0-875a-b322bf237aeb","endpoint_role":"create"},{"id":"410C3385-D7B2-4BF9-808A-96446D29E158","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"Get tenant hostname for use in the output blocks","childId":"4D18D41D-77A5-4F54-A076-0214F7C4D32D","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":120,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"12433097-FDBF-466D-9406-BEA90D5505BC","type":"VariableBlock","disabled":false,"name":"tenantHostname","displayName":"Variable - tenantHostname","comment":"","childId":"B46D5003-A4CB-43C9-92DA-4D39A625D361","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":840,"variableGuid":"8CF32FBC-E69C-4CF1-BBF0-E60EA0202242","operations":[{"id":"set_value","key":"98A567AC-27C8-49E4-9C54-FC30E3666BC8","name":"Set value of { variable }","value":"https://{ if: { $.getCurrentTenantInfo.hostnames[1] } empty , $.getCurrentTenantInfo.hostnames[0], $.getCurrentTenantInfo.hostnames[1] }"}]},{"id":"ED02D806-E3AF-4290-B465-93A7EAB94E28","type":"EndpointBlock","disabled":false,"name":"getSpace","displayName":"Qlik Cloud Services - Get Space","comment":"","childId":"381594AB-BA4D-479F-8A6E-956FBCBE751F","inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{ $.rawAPIRequest2.data[0].spaceId }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue Automation and report errors","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1420,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"},{"id":"AA6CB73F-D3B1-49E2-B520-E3542DA4C060","type":"EndpointBlock","disabled":false,"name":"getSpace2","displayName":"Qlik Cloud Services - Get Space 2","comment":"","childId":"C38DF8BC-C1BE-4C11-BAF6-F989AF614F39","inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{ $.rawAPIRequest3.data[0].spaceId }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue Automation and report errors","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":2480,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"},{"id":"A50A26C5-94F6-4DE6-B9C3-73EF7973E06F","type":"ForEachBlock","disabled":false,"name":"loop2","displayName":"Loop 2","comment":"","childId":"5F529360-0FA5-443D-BDF5-C5909665587F","inputs":[{"id":"input","value":"{ $.AppsToLoad }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":1080,"loopBlockId":"9BB742E7-7CC4-4AE2-A9D0-3BD47CE9EE5F"},{"id":"B46D5003-A4CB-43C9-92DA-4D39A625D361","type":"ShowBlock","disabled":false,"name":"output3","displayName":"Output 3","comment":"","childId":"A50A26C5-94F6-4DE6-B9C3-73EF7973E06F","inputs":[{"id":"input","value":"### **Reload Order Table** \n\n| Step| App| Space|\n|------|---------|------------------|","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":960},{"id":"DA752535-5CEE-483F-BA49-C6291F33060B","type":"ShowBlock","disabled":false,"name":"output4","displayName":"Output 4","comment":"","childId":"8EE24CB7-B640-4AEC-8499-2974A0C3107B","inputs":[{"id":"input","value":"--- \n\n **Starting to reload apps...**\n\n| Target app ID | Target app name | Target app space ID | Target app result | Duration | Logs |\n| -- | -- | -- | -- | -- | -- |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2140},{"id":"C38DF8BC-C1BE-4C11-BAF6-F989AF614F39","type":"IfElseBlock","disabled":false,"name":"condition11","displayName":"Condition 11","comment":"If no reload permission on object, and add role set to 1","childId":"F8D5F7ED-3F1B-4CA8-90B3-29369F1A0C9A","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.autoResolveAccessIssues}","input2":"1","operator":"="},{"input1":"{$.rawAPIRequest3.data[*].actions}","input2":"reload","operator":"doesntContain"},{"input1":"{count: {$.rawAPIRequest3.data}}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":120,"y":2600,"childTrueId":"8A603ABB-41ED-4454-B968-229D46511B86","childFalseId":null},{"id":"8A603ABB-41ED-4454-B968-229D46511B86","type":"EndpointBlock","disabled":false,"name":"getCurrentUserId2","displayName":"Qlik Cloud Services - Get Current User Id 2","comment":"","childId":"F0479A0B-2994-4874-9BBE-57E24B8DA201","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":2680,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9","endpoint_role":"get"},{"id":"F0479A0B-2994-4874-9BBE-57E24B8DA201","type":"EndpointBlock","disabled":false,"name":"listMembersFromSpace2","displayName":"Qlik Cloud Services - List Members From Space 2","comment":"","childId":"8323D6FB-814C-4333-9FC9-CDC32F74973E","inputs":[{"id":"358ee8a0-6d34-11eb-b1f3-91a0d7274b22","value":"{$.rawAPIRequest3.data[0].spaceId}","type":"string","structure":[]},{"id":"86f34440-dd7e-11ef-91d1-63f16d094078","value":null,"type":"string","structure":[]},{"id":"972a9800-dd7e-11ef-95ae-93a368f4ba58","value":null,"type":"select","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":240,"y":2800,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"ffe6d930-6d33-11eb-ad8a-334e25c5e295","endpoint_role":"list"},{"id":"8323D6FB-814C-4333-9FC9-CDC32F74973E","type":"FilterListBlock","disabled":false,"name":"filterList2","displayName":"Filter over Qlik Cloud Services - List Members From Space 2 - Filter List 2","comment":"","childId":"AC419DAA-9A0A-46FD-ADEA-F8D74E67ADCA","inputs":[{"id":"list","value":"{ $.listMembersFromSpace2 }","type":"string","structure":[]},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"id","input2":"{$.getCurrentUserId2}","operator":"="},{"input1":"type","input2":"user","operator":"="}]},"type":"custom","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":240,"y":2920,"loopBlockId":null},{"id":"AC419DAA-9A0A-46FD-ADEA-F8D74E67ADCA","type":"IfElseBlock","disabled":false,"name":"condition15","displayName":"Condition 15","comment":"If a result is found update it by assigning everything available","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{count: {$.filterList2}}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":240,"y":3040,"childTrueId":"A2D104C9-E5A8-4C21-B667-24F3745FB6BE","childFalseId":"3865CC5D-68EF-4DA0-AE5E-0F0EAE32EDAD"},{"id":"A2D104C9-E5A8-4C21-B667-24F3745FB6BE","type":"EndpointBlock","disabled":false,"name":"updateRolesOfMemberFromSpace2","displayName":"Qlik Cloud Services - Update Roles Of Member From Space 2","comment":"","childId":null,"inputs":[{"id":"8c6b43e0-6d42-11eb-85f6-917131a7d145","value":"{$.rawAPIRequest3.data[0].spaceId}","type":"string","structure":[]},{"id":"8c72c230-6d42-11eb-837d-b1e5663f20d2","value":"{$.getCurrentUserId2}","type":"string","structure":[]},{"id":"01ac8e60-6d43-11eb-9d02-4d69db8c0501","value":"{json: {$.getSpace2.meta.assignableRoles}}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":3120,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"8c54ade0-6d42-11eb-b3a8-75befcc89b0a","endpoint_role":"update"},{"id":"3865CC5D-68EF-4DA0-AE5E-0F0EAE32EDAD","type":"EndpointBlock","disabled":false,"name":"addMemberToSpace2","displayName":"Qlik Cloud Services - Add Member To Space 2","comment":"","childId":null,"inputs":[{"id":"3162f740-6d33-11eb-a089-71f7ccab24b9","value":"{$.rawAPIRequest3.data[0].spaceId}","type":"string","structure":[]},{"id":"27499b00-6d31-11eb-bbe5-5b3db3c974dc","value":"{$.getCurrentUserId2}","type":"string","structure":[]},{"id":"2751b870-6d31-11eb-9d77-41c5fae28bc5","value":"{json: {$.getSpace2.meta.assignableRoles}}","type":"string","structure":[]},{"id":"275e2c50-6d31-11eb-8eeb-157347755492","value":"aec7c5b0-6d32-11eb-a4b2-f5e181a2c241","type":"select","displayValue":"user","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":3280,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"272d9c70-6d31-11eb-870f-67624392ed86","endpoint_role":"create"},{"id":"58102F1D-B764-40FC-84AF-C41B2CB90DF5","type":"VariableBlock","disabled":false,"name":"autoResolveAccessIssues","displayName":"Variable - autoResolveAccessIssues","comment":"To automatically attempt to provide the current user with access to resources for the reload, set to 1","childId":"12433097-FDBF-466D-9406-BEA90D5505BC","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":720,"variableGuid":"741016FA-90E6-4077-98C1-D1E8DCA9558F","operations":[{"id":"set_value","key":"7DF50A3F-4FA3-49AB-9D73-BC715139150E","name":"Set value of { variable }","value":"0"}]},{"id":"8EE24CB7-B640-4AEC-8499-2974A0C3107B","type":"ForEachBlock","disabled":false,"name":"loop3","displayName":"Loop 3","comment":"","childId":"22A9185E-DD51-44A5-BBF5-DA1F44A8EAF9","inputs":[{"id":"input","value":"{ $.AppsToLoad }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2260,"loopBlockId":"33AAA356-C861-4850-8969-27A3D3E387BD"},{"id":"F8D5F7ED-3F1B-4CA8-90B3-29369F1A0C9A","type":"IfElseBlock","disabled":false,"name":"condition10","displayName":"Condition 10","comment":"If app is found","childId":null,"inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{count: {$.rawAPIRequest3.data}}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":120,"y":3520,"childTrueId":"2C4315B9-885E-4557-8AFD-389E35CA2D4B","childFalseId":"D66DB9A7-3C16-4BB4-ACB0-931BE13B2A81"},{"id":"602D5AE4-2E95-488E-942C-27FAB944FD8D","type":"ShowBlock","disabled":false,"name":"output10","displayName":"Output 10","comment":"","childId":null,"inputs":[{"id":"input","value":"| {$.loop3.item} | Not found | Not found | SKIPPED | 0 | None |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":8660},{"id":"EA0B8198-574D-4306-8D59-1EBDF059E011","type":"VariableBlock","disabled":false,"name":"iterReloadsSkipped","displayName":"Variable - iterReloadsSkipped","comment":"","childId":"602D5AE4-2E95-488E-942C-27FAB944FD8D","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":8540,"variableGuid":"C598F795-8946-498B-A3A5-21A51A44967D","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"900DD5AA-5D99-4DC6-A909-D26504E6E7CF","type":"EndpointBlock","disabled":true,"name":"SendMail","displayName":"Mail - Send Mail","comment":"","childId":"16512D23-467E-4BBF-94CE-3107F542867A","inputs":[{"id":"442845a0-cd00-11eb-9aa5-b966a68573b7","value":"support@exsitec.se","type":"string","structure":[]},{"id":"543f08c0-cd00-11eb-b9c6-af8e23cc2439","value":null,"type":"string","structure":[]},{"id":"5cbdb1d0-cd00-11eb-8afd-ddd4ecc002ac","value":null,"type":"string","structure":[]},{"id":"72cad1e0-cd00-11eb-aa1b-3f42c1d22e38","value":"{$.Customer} - {automationname} - Failed","type":"string","structure":[]},{"id":"79af8c50-cd24-11eb-a019-dfdc9a7f7317","value":"90ff46f0-cd24-11eb-bda1-0f1c7c213bfb","type":"select","displayValue":"html","structure":[]},{"id":"7d225d00-cd00-11eb-8493-055760e8b45a","value":"<div style=\"padding: 10px; border: 1px solid #f44336; background-color: #ffdddd;\">\n<h2 style=\"margin: 0; color: #d32f2f;\">Error Code:</h2>\n<p>{$.DoReload.errorCode}</p>\n\n<h2 style=\"margin: 0; color: #d32f2f;\">Error Message:</h2>\n<p>{$.DoReload.errorMessage}</p>\n<strong>Log:</strong>\n<p>{$.DoReload.log}</p>\n</div>","type":"longtext","structure":[]},{"id":"bb841f10-3341-11ec-b9a3-9d6de0bb7866","value":null,"type":"custom","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":7500,"datasourcetype_guid":"05407a80-ccfd-11eb-b098-7140f6ac27f4","endpoint_guid":"84a79bf0-ccff-11eb-a508-7d415a725ea7","endpoint_role":"create"},{"id":"0DF02586-7C97-4EBA-8308-74B0DBA2B7D6","type":"EndpointBlock","disabled":false,"name":"listAutomations","displayName":"Qlik Cloud Services - List Automations","comment":"Finding status of previous run","childId":"BFC7A7BA-FAC8-4FD7-9EDA-01D7D87286B9","inputs":[{"id":"4da7b650-cc5c-11ec-b5fd-57c6cdbb55e5","value":null,"type":"string","structure":[]},{"id":"a3c3eb00-cc65-11ec-b047-91d50a3080e1","value":"name co \"{automationname}\"","type":"string","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":0,"y":9140,"loopBlockId":null,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"4d780290-cc5c-11ec-aefa-6169dde43f42","endpoint_role":"list"},{"id":"BFC7A7BA-FAC8-4FD7-9EDA-01D7D87286B9","type":"IfElseBlock","disabled":false,"name":"condition12","displayName":"Condition 12","comment":"Recovered email if previous automation failed","childId":null,"inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{$.listAutomations[0].lastRunStatus}","input2":"failed","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":0,"y":9260,"childTrueId":"4FA19E22-3A38-4ABD-AD7F-FA7131E0A5CF","childFalseId":null},{"id":"4FA19E22-3A38-4ABD-AD7F-FA7131E0A5CF","type":"EndpointBlock","disabled":true,"name":"SendMail7","displayName":"Mail - Send Mail 7","comment":"","childId":null,"inputs":[{"id":"442845a0-cd00-11eb-9aa5-b966a68573b7","value":"support@exsitec.se","type":"string","structure":[]},{"id":"543f08c0-cd00-11eb-b9c6-af8e23cc2439","value":null,"type":"string","structure":[]},{"id":"5cbdb1d0-cd00-11eb-8afd-ddd4ecc002ac","value":null,"type":"string","structure":[]},{"id":"72cad1e0-cd00-11eb-aa1b-3f42c1d22e38","value":"{$.Customer} - {automationname} - Recovered","type":"string","structure":[]},{"id":"79af8c50-cd24-11eb-a019-dfdc9a7f7317","value":"8ca918e0-cd24-11eb-a713-779c5b59e5f7","type":"select","displayValue":"text","structure":[]},{"id":"7d225d00-cd00-11eb-8493-055760e8b45a","value":"{automationname} has had a successful reload since last failure.","type":"longtext","structure":[]},{"id":"bb841f10-3341-11ec-b9a3-9d6de0bb7866","value":null,"type":"custom","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":9340,"datasourcetype_guid":"05407a80-ccfd-11eb-b098-7140f6ac27f4","endpoint_guid":"84a79bf0-ccff-11eb-a508-7d415a725ea7","endpoint_role":"create"},{"id":"73427D4B-64CB-4557-A4AA-829DB68DB040","type":"VariableBlock","disabled":false,"name":"Customer","displayName":"Variable - Customer","comment":"Customers - name. Used in email","childId":"7C54960D-65F9-4EB4-BB1E-72AB5032F2DA","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":360,"variableGuid":"400B88BB-F3FD-4941-97FA-A79F981C89EA","operations":[{"id":"set_value","key":"44937DF8-6310-4CFC-A011-5D5A3D1FA98E","name":"Set value of { variable }","value":"Qlikard AB"}]},{"id":"17BB8D2E-8823-4067-B610-55E40FA89A16","type":"VariableBlock","disabled":false,"name":"reloadMessage","displayName":"Variable - reloadMessage","comment":"","childId":"EDBF9CE6-024E-4E8E-B0D4-D95CC9EF57ED","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":7740,"variableGuid":"E780A7B9-75F6-45ED-A6F4-2A221953B80B","operations":[{"id":"set_value","key":"FCE6032E-1A3A-4519-822C-AEB699AD2D4A","name":"Set value of { variable }","value":"Reloads: {$.iter} ({$.iterReloadsTriggered} successful, {$.iterReloadsSkipped} skipped, {$.iterReloadsFailed} failed)"}]},{"id":"EDBF9CE6-024E-4E8E-B0D4-D95CC9EF57ED","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle4","displayName":"Update Run Title 4","comment":"","childId":"BC410B8F-1397-4C2E-8AE8-9B50697705AE","inputs":[{"id":"title","value":"{$.reloadMessage}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":7860},{"id":"9CC9B2BB-3A1A-44D4-BC8D-CB4B44BB4AED","type":"ErrorBlock","disabled":false,"name":"error","displayName":"Error","comment":"","childId":null,"inputs":[{"id":"message","value":"Reload failed... Stopping automation","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":8100},{"id":"FE693B02-FC17-417E-AB74-6C453C7CB988","type":"ShowBlock","disabled":false,"name":"output12","displayName":"Output 12","comment":"","childId":"5539784B-DE7D-43D0-93E9-A08B45132370","inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | Retry {$.LoopItr}: [{$.DoReload2.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes | [LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload2.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":720,"y":5900},{"id":"22A9185E-DD51-44A5-BBF5-DA1F44A8EAF9","type":"VariableBlock","disabled":false,"name":"reloadMessage","displayName":"Variable - reloadMessage","comment":"","childId":"D26BC2CE-9D27-44CE-BCDD-374BCAA6C09F","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":8900,"variableGuid":"E780A7B9-75F6-45ED-A6F4-2A221953B80B","operations":[{"id":"set_value","key":"FCE6032E-1A3A-4519-822C-AEB699AD2D4A","name":"Set value of { variable }","value":"Reloads: {$.iter} ({$.iterReloadsTriggered} successful, {$.iterReloadsSkipped} skipped, {$.iterReloadsFailed} failed)"}]},{"id":"D26BC2CE-9D27-44CE-BCDD-374BCAA6C09F","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle5","displayName":"Update Run Title 5","comment":"","childId":"0DF02586-7C97-4EBA-8308-74B0DBA2B7D6","inputs":[{"id":"title","value":"{$.reloadMessage}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":9020},{"id":"7C54960D-65F9-4EB4-BB1E-72AB5032F2DA","type":"VariableBlock","disabled":false,"name":"TimesRetry","displayName":"Variable - TimesRetry","comment":"Should reload retry after failed? Add how many retries here","childId":"D50F89C4-3DAB-4E61-81C3-01225F858001","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":480,"variableGuid":"1A6D8CB8-EB18-4C0D-B3DB-A7E71351E457","operations":[{"id":"set_value","key":"02AEEC04-29B2-4CA8-A544-0DD16CFF3F16","name":"Set value of { variable }","value":"1"}]},{"id":"D50F89C4-3DAB-4E61-81C3-01225F858001","type":"VariableBlock","disabled":false,"name":"MinutesUntilRety","displayName":"Variable - MinutesUntilRety","comment":"How many minutes to wait until retry if variable above is >0","childId":"58102F1D-B764-40FC-84AF-C41B2CB90DF5","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":600,"variableGuid":"AB3983E5-6AF1-47EC-B30A-40BFB67DE6DF","operations":[{"id":"set_value","key":"A891E96F-CF58-433F-9413-138C665DB1AE","name":"Set value of { variable }","value":"5"}]},{"id":"69D6E23E-8F17-4008-A953-0A24B2CCD36A","type":"CustomCodeBlock3","disabled":false,"name":"customCode","displayName":"Custom Code","comment":"","childId":"CAD8290D-ED7C-4EF5-B76B-21D5FB75EBEC","inputs":[{"id":"language","value":"python","type":"select","displayValue":"Python 3.11","structure":[]},{"id":"inputs","value":[{"key":"Loops","value":"{ $.TimesRetry }"}],"type":"object","mode":"keyValue","structure":[]},{"id":"code","value":"n = inputs['Loops']\n \n# Create a list from 1 to n\nnum_list = list(range(1, n + 1))  \n\n# Output the list\nprint(num_list)","type":"code","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":4520},{"id":"1045C34D-2C14-41D8-96E1-F11FFDC83400","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop","comment":"","childId":null,"inputs":[{"id":"input","value":"{ $.customCode }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":4880,"loopBlockId":"C27A295F-13A3-43A2-B34C-363B593493D2"},{"id":"18D858E5-E01D-4C65-BF10-A6DB71FA495E","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"Retries?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.TimesRetry }","input2":"0","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":360,"y":4440,"childTrueId":"69D6E23E-8F17-4008-A953-0A24B2CCD36A","childFalseId":"900DD5AA-5D99-4DC6-A909-D26504E6E7CF"},{"id":"DB454954-723F-475E-8A85-4EE3D45C0DCB","type":"VariableBlock","disabled":false,"name":"iterReloadsTriggered","displayName":"Variable - iterReloadsTriggered","comment":"","childId":"E6415C0B-3D04-4C55-AF5C-DCD0DF9F062C","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":4160,"variableGuid":"A7BED47C-3522-4144-9684-6626B21898B2","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"E6415C0B-3D04-4C55-AF5C-DCD0DF9F062C","type":"ShowBlock","disabled":false,"name":"output14","displayName":"Output 14","comment":"","childId":null,"inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | [{$.DoReload.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes |[LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":360,"y":4280},{"id":"9955526F-B56C-47FE-B86D-B78A2CB8BC13","type":"SleepBlock","disabled":false,"name":"sleep","displayName":"Sleep","comment":"","childId":"37AD1EA5-A152-4145-BD82-AF4C673CDCBA","inputs":[{"id":"time","value":"{ multiply: { $.MinutesUntilRety }, 60 }","type":"string","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":5220},{"id":"8FEC0C31-EECC-41FC-AF60-AAA2E1464B49","type":"ShowBlock","disabled":false,"name":"output15","displayName":"Output 15","comment":"","childId":"1045C34D-2C14-41D8-96E1-F11FFDC83400","inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | [{$.DoReload.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) Retrying in {multiply: { $.MinutesUntilRety }, 60} seconds...  |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes | [LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":4760},{"id":"CAD8290D-ED7C-4EF5-B76B-21D5FB75EBEC","type":"VariableBlock","disabled":false,"name":"iterReloadsFailed","displayName":"Variable - iterReloadsFailed","comment":"","childId":"8FEC0C31-EECC-41FC-AF60-AAA2E1464B49","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":480,"y":4640,"variableGuid":"F942EDDF-15A0-4AF2-8228-9BACD5BED741","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"C27A295F-13A3-43A2-B34C-363B593493D2","type":"VariableBlock","disabled":false,"name":"iter","displayName":"Variable - iter","comment":"","childId":"5F689CD3-5196-4407-B36B-E0FC39282195","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":4980,"variableGuid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","operations":[{"id":"add","key":"F4B8AB11-C6B5-48D2-9637-36D77A79F972","name":"Add to { variable }","value":"1"}]},{"id":"2E48FED3-83A7-457D-9D33-723AB5E37930","type":"SnippetBlock","disabled":false,"name":"DoReload2","displayName":"Qlik Cloud Services - Do Reload 2","comment":"Attempt the reload","childId":"1D3EF74D-AF09-43DF-91F3-5E23EABE1024","inputs":[{"id":"29603390-e716-11ea-9e37-05e08ee32111","value":"{ $.loop3.item }","type":"string","structure":[]},{"id":"2ac9eef0-a677-11eb-aacc-8b755d0fe484","value":"Wait for reload to complete","type":"select","displayValue":"Wait for reload to complete","structure":[]},{"id":"6892c0c0-c795-11eb-9860-9dc8cb705e25","value":null,"type":"select","structure":[]},{"id":"ecebf340-c797-11eb-8671-53658babb1a1","value":null,"type":"select","structure":[]},{"id":"069de770-8277-11f0-a252-ad6769632a1c","value":null,"type":"select","structure":{}},{"id":"06a02bd0-8277-11f0-b78b-f7910663702f","value":null,"type":"object","mode":"keyValue","structure":{}},{"id":"cc8dd1c0-a438-11f0-9e17-c77404b63446","value":null,"type":"select","structure":{}}],"settings":[{"id":"blendr_on_error","value":"warning","type":"select","displayValue":"Warning - Continue Automation and report errors","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":5460,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"b5dbb7a0-e715-11ea-b2bf-43bb35adee19"},{"id":"5C1AA458-3F53-4B92-A0DF-00141D7C9023","type":"IfElseBlock","disabled":false,"name":"condition4","displayName":"Condition 4","comment":"Was reload succesful?","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{$.DoReload2.status}","input2":"SUCCEEDED","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":600,"y":5700,"childTrueId":"B11C781B-DD94-4A49-B5E4-7E6262974079","childFalseId":"2BD00EA4-13F3-4E00-8A10-00745247E7E1"},{"id":"B11C781B-DD94-4A49-B5E4-7E6262974079","type":"VariableBlock","disabled":false,"name":"iterReloadsTriggered","displayName":"Variable - iterReloadsTriggered","comment":"","childId":"FE693B02-FC17-417E-AB74-6C453C7CB988","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":720,"y":5780,"variableGuid":"A7BED47C-3522-4144-9684-6626B21898B2","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"5539784B-DE7D-43D0-93E9-A08B45132370","type":"ForEachBreakBlock","disabled":false,"name":"exitLoop","displayName":"Exit Loop","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":720,"y":6020},{"id":"BD17B1ED-A445-4BA0-AF44-ABE30F6DDF21","type":"VariableBlock","disabled":false,"name":"iterReloadsFailed","displayName":"Variable - iterReloadsFailed","comment":"","childId":"F7F9FEA5-16C6-4C69-9E2E-EC1025F3B05E","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":7020,"variableGuid":"F942EDDF-15A0-4AF2-8228-9BACD5BED741","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"F7F9FEA5-16C6-4C69-9E2E-EC1025F3B05E","type":"ShowBlock","disabled":false,"name":"output5","displayName":"Output 5","comment":"","childId":null,"inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | Retry {$.LoopItr}: [{$.DoReload2.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes | [LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload2.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":7140},{"id":"2BD00EA4-13F3-4E00-8A10-00745247E7E1","type":"IfElseBlock","disabled":false,"name":"condition2","displayName":"Condition 2","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.LoopItr }","input2":"{ count: { $.customCode } }","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":720,"y":6180,"childTrueId":"99D58325-7529-4957-8FC7-AF946BD576C8","childFalseId":"BD17B1ED-A445-4BA0-AF44-ABE30F6DDF21"},{"id":"99D58325-7529-4957-8FC7-AF946BD576C8","type":"EndpointBlock","disabled":true,"name":"SendMail2","displayName":"Mail - Send Mail 2","comment":"","childId":"81882103-03D6-4D73-ABD0-91596ECC61EF","inputs":[{"id":"442845a0-cd00-11eb-9aa5-b966a68573b7","value":"support@exsitec.se","type":"string","structure":[]},{"id":"543f08c0-cd00-11eb-b9c6-af8e23cc2439","value":null,"type":"string","structure":[]},{"id":"5cbdb1d0-cd00-11eb-8afd-ddd4ecc002ac","value":null,"type":"string","structure":[]},{"id":"72cad1e0-cd00-11eb-aa1b-3f42c1d22e38","value":"{$.Customer} - {automationname} - Failed","type":"string","structure":[]},{"id":"79af8c50-cd24-11eb-a019-dfdc9a7f7317","value":"90ff46f0-cd24-11eb-bda1-0f1c7c213bfb","type":"select","displayValue":"html","structure":[]},{"id":"7d225d00-cd00-11eb-8493-055760e8b45a","value":"<div style=\"padding: 10px; border: 1px solid #f44336; background-color: #ffdddd;\">\n<h2 style=\"margin: 0; color: #d32f2f;\">Error Code:</h2>\n<p>{$.DoReload.errorCode}</p>\n\n<h2 style=\"margin: 0; color: #d32f2f;\">Error Message:</h2>\n<p>{$.DoReload.errorMessage}</p>\n<strong>Log:</strong>\n<p>{$.DoReload.log}</p>\n</div>","type":"longtext","structure":[]},{"id":"bb841f10-3341-11ec-b9a3-9d6de0bb7866","value":null,"type":"custom","structure":[]}],"settings":[{"id":"datasource","value":null,"type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6260,"datasourcetype_guid":"05407a80-ccfd-11eb-b098-7140f6ac27f4","endpoint_guid":"84a79bf0-ccff-11eb-a508-7d415a725ea7","endpoint_role":"create"},{"id":"81882103-03D6-4D73-ABD0-91596ECC61EF","type":"VariableBlock","disabled":false,"name":"iterReloadsFailed","displayName":"Variable - iterReloadsFailed","comment":"","childId":"A8E667A4-FACA-42B7-87FE-17763C4EB903","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6380,"variableGuid":"F942EDDF-15A0-4AF2-8228-9BACD5BED741","operations":[{"id":"add","key":"6CE46F3B-F418-4A41-97FD-00DD5FA7FB29","name":"Add to { variable }","value":"1"}]},{"id":"A8E667A4-FACA-42B7-87FE-17763C4EB903","type":"VariableBlock","disabled":false,"name":"reloadMessage","displayName":"Variable - reloadMessage","comment":"","childId":"44455714-27EA-4EFB-A39C-DF3F3B6F51BB","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6500,"variableGuid":"E780A7B9-75F6-45ED-A6F4-2A221953B80B","operations":[{"id":"set_value","key":"FCE6032E-1A3A-4519-822C-AEB699AD2D4A","name":"Set value of { variable }","value":"Reloads: {$.iter} ({$.iterReloadsTriggered} successful, {$.iterReloadsSkipped} skipped, {$.iterReloadsFailed} failed)"}]},{"id":"44455714-27EA-4EFB-A39C-DF3F3B6F51BB","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle6","displayName":"Update Run Title 6","comment":"","childId":"6A3805C3-E68D-447B-AF23-D68053A7D10E","inputs":[{"id":"title","value":"{$.reloadMessage}","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6620},{"id":"6A3805C3-E68D-447B-AF23-D68053A7D10E","type":"ShowBlock","disabled":false,"name":"output6","displayName":"Output 6","comment":"","childId":"57412556-321E-42B7-9B3D-B7C664E00DCE","inputs":[{"id":"input","value":"| [{$.loop3.item}]({$.tenantHostname}/sense/app/{$.loop3.item}/overview) | {$.rawAPIRequest3.data[0].name} | [{$.getSpace2.name}]({$.tenantHostname}/catalog?space_filter={$.rawAPIRequest3.data[0].spaceId}) | Retry {$.LoopItr}: [{$.DoReload2.status}]({$.tenantHostname}/item/{$.rawAPIRequest3.data[0].id}/history) |  {round: {divide: { subtract: { $.vEndTime }, $.vStartTime }, 60}, 1} Minutes | [LOGS]({$.tenantHostname}/api/v1/apps/{$.loop3.item}/reloads/logs/{$.DoReload2.id}) |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6740},{"id":"57412556-321E-42B7-9B3D-B7C664E00DCE","type":"ErrorBlock","disabled":false,"name":"error2","displayName":"Error 2","comment":"","childId":null,"inputs":[{"id":"message","value":"Reload failed... Stopping automation","type":"string","structure":[]},{"id":"action","value":"stop","type":"select","structure":[]}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":840,"y":6860},{"id":"067486AA-3517-4264-96E4-287F2E821E02","type":"VariableBlock","disabled":false,"name":"iter","displayName":"Variable - iter","comment":"","childId":"ED62B2CB-B5D7-48EE-996B-E80E9E6A316C","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":3960,"variableGuid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","operations":[{"id":"add","key":"F4B8AB11-C6B5-48D2-9637-36D77A79F972","name":"Add to { variable }","value":"1"}]},{"id":"5F689CD3-5196-4407-B36B-E0FC39282195","type":"VariableBlock","disabled":false,"name":"LoopItr","displayName":"Variable - LoopItr","comment":"","childId":"9955526F-B56C-47FE-B86D-B78A2CB8BC13","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":5100,"variableGuid":"31634A24-E715-441B-A9A6-639F2C96D712","operations":[{"id":"add","key":"3FA7D930-C3F7-4168-8BE8-2DD97494C809","name":"Add to { variable }","value":"1"}]},{"id":"9BB742E7-7CC4-4AE2-A9D0-3BD47CE9EE5F","type":"VariableBlock","disabled":false,"name":"iter","displayName":"Variable - iter","comment":"","childId":"B04B126E-E6B2-4A33-9436-D1AC5D9D17BD","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":1180,"variableGuid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","operations":[{"id":"add","key":"F4B8AB11-C6B5-48D2-9637-36D77A79F972","name":"Add to { variable }","value":"1"}]},{"id":"5F529360-0FA5-443D-BDF5-C5909665587F","type":"VariableBlock","disabled":false,"name":"iter","displayName":"Variable - iter","comment":"Reset itr","childId":"DA752535-5CEE-483F-BA49-C6291F33060B","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2020,"variableGuid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","operations":[{"id":"set_value","key":"C9D7EA71-8132-4248-B5C8-1580CE12FB6E","name":"Set value of { variable }","value":"0"}]},{"id":"4D18D41D-77A5-4F54-A076-0214F7C4D32D","type":"VariableBlock","disabled":false,"name":"AppsToLoad","displayName":"Variable - AppsToLoad","comment":"Apps to load","childId":"73427D4B-64CB-4557-A4AA-829DB68DB040","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":240,"variableGuid":"CDCB8E4F-7294-4489-BC65-0CDFEF7CD1F2","operations":[{"id":"add_item","key":"DDA94628-82A2-484E-87E4-546088A34326","name":"Add item to { variable }","value":"ba9305a6-9dc4-4f4c-84a5-b58f3fdf4f10"},{"id":"add_item","key":"B4FD6F9D-A6B5-4FC9-BF9E-0AED583ADA8F","name":"Add item to { variable }","value":"1231231"}]},{"id":"381594AB-BA4D-479F-8A6E-956FBCBE751F","type":"IfElseBlock","disabled":false,"name":"condition13","displayName":"Condition 13","comment":"If app is found","childId":null,"inputs":[{"id":"conditions","value":{"mode":"some","conditions":[{"input1":"{count: {$.rawAPIRequest2.data}}","input2":"1","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":120,"y":1540,"childTrueId":"F9C88113-1710-4582-B931-47B32F49ED6A","childFalseId":"63D4AC0F-7C1E-4A77-89D8-2AA8CB2AABF9"},{"id":"63D4AC0F-7C1E-4A77-89D8-2AA8CB2AABF9","type":"ShowBlock","disabled":false,"name":"output7","displayName":"Output 7","comment":"","childId":null,"inputs":[{"id":"input","value":"| {$.iter} | **App not found:** \"{$.loop2.item}\" |**Skipping...** |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":1780},{"id":"D66DB9A7-3C16-4BB4-ACB0-931BE13B2A81","type":"VariableBlock","disabled":false,"name":"iter","displayName":"Variable - iter","comment":"","childId":"EA0B8198-574D-4306-8D59-1EBDF059E011","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":8420,"variableGuid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","operations":[{"id":"add","key":"F4B8AB11-C6B5-48D2-9637-36D77A79F972","name":"Add to { variable }","value":"1"}]},{"id":"2C4315B9-885E-4557-8AFD-389E35CA2D4B","type":"VariableBlock","disabled":false,"name":"vStartTime","displayName":"Variable - vStartTime","comment":"","childId":"C36C81F1-8375-4539-8E4A-CB8C469C2AB3","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":3600,"variableGuid":"396AB40F-4DDE-45D0-8B98-491F5CBD0A53","operations":[{"id":"set_value","key":"6835AD02-708B-4CD3-B076-41535B9AE007","name":"Set value of { variable }","value":"{ date: 'now', 'U' }"}]},{"id":"8B7EA497-A610-4E94-B20E-C980F3B6835D","type":"VariableBlock","disabled":false,"name":"vEndTime","displayName":"Variable - vEndTime","comment":"","childId":"067486AA-3517-4264-96E4-287F2E821E02","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":240,"y":3840,"variableGuid":"743C53E1-FA64-4C48-82F0-F89DB5EEBFED","operations":[{"id":"set_value","key":"6AC24683-E4A1-458B-A811-AC688EFC5C20","name":"Set value of { variable }","value":"{ date: 'now', 'U' }"}]},{"id":"37AD1EA5-A152-4145-BD82-AF4C673CDCBA","type":"VariableBlock","disabled":false,"name":"vStartTime","displayName":"Variable - vStartTime","comment":"","childId":"2E48FED3-83A7-457D-9D33-723AB5E37930","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":5340,"variableGuid":"396AB40F-4DDE-45D0-8B98-491F5CBD0A53","operations":[{"id":"set_value","key":"6835AD02-708B-4CD3-B076-41535B9AE007","name":"Set value of { variable }","value":"{ date: 'now', 'U' }"}]},{"id":"1D3EF74D-AF09-43DF-91F3-5E23EABE1024","type":"VariableBlock","disabled":false,"name":"vEndTime","displayName":"Variable - vEndTime","comment":"","childId":"5C1AA458-3F53-4B92-A0DF-00141D7C9023","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":600,"y":5580,"variableGuid":"743C53E1-FA64-4C48-82F0-F89DB5EEBFED","operations":[{"id":"set_value","key":"6AC24683-E4A1-458B-A811-AC688EFC5C20","name":"Set value of { variable }","value":"{ date: 'now', 'U' }"}]}],"variables":[{"guid":"D3F3B2FA-B8A9-4508-85ED-4258E9884E46","name":"prefixForChain","type":"string"},{"guid":"E52EA682-452F-41E6-A3DD-454E5DE20228","name":"defaultTolerance","type":"number"},{"guid":"CEFCC5FD-B0DE-49D2-8F39-0FDA5256D945","name":"iter","type":"number"},{"guid":"E780A7B9-75F6-45ED-A6F4-2A221953B80B","name":"reloadMessage","type":"string"},{"guid":"A7BED47C-3522-4144-9684-6626B21898B2","name":"iterReloadsTriggered","type":"number"},{"guid":"F942EDDF-15A0-4AF2-8228-9BACD5BED741","name":"iterReloadsFailed","type":"number"},{"guid":"9FDC50A6-4C9C-40CA-9E7E-C1195CDAB207","name":"appId","type":"string"},{"guid":"C598F795-8946-498B-A3A5-21A51A44967D","name":"iterReloadsSkipped","type":"number"},{"guid":"8CF32FBC-E69C-4CF1-BBF0-E60EA0202242","name":"tenantHostname","type":"string"},{"guid":"DCDDF783-F41A-4E47-AF57-6F026C6F6E76","name":"onlyManagedSpaces","type":"number"},{"guid":"38F6EF50-A00C-472D-B536-FA75FF5F03AA","name":"secondsSinceLastReload","type":"number"},{"guid":"741016FA-90E6-4077-98C1-D1E8DCA9558F","name":"autoResolveAccessIssues","type":"number"},{"guid":"CDCB8E4F-7294-4489-BC65-0CDFEF7CD1F2","name":"AppsToLoad","type":"list"},{"guid":"400B88BB-F3FD-4941-97FA-A79F981C89EA","name":"Customer","type":"string"},{"guid":"1A6D8CB8-EB18-4C0D-B3DB-A7E71351E457","name":"TimesRetry","type":"number"},{"guid":"AB3983E5-6AF1-47EC-B30A-40BFB67DE6DF","name":"MinutesUntilRety","type":"number"},{"guid":"31634A24-E715-441B-A9A6-639F2C96D712","name":"LoopItr","type":"number"},{"guid":"396AB40F-4DDE-45D0-8B98-491F5CBD0A53","name":"vStartTime","type":"number"},{"guid":"743C53E1-FA64-4C48-82F0-F89DB5EEBFED","name":"vEndTime","type":"number"}]}