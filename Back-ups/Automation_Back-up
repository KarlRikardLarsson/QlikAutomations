{"blocks":[{"id":"3C20B071-E9B9-423B-8DF8-7AC02CAEB60F","type":"StartBlock","disabled":false,"name":"AutomationUpdated","displayName":"Automation Updated","comment":"Configuration - set the run mode to webhook, select Qlik Cloud Services as the connector and then select the \"Automation updated event\".","childId":"24AB097E-30B5-416A-BF8E-998942195DC7","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":[]},{"id":"webhook_event_guid","value":"d3958320-f77a-11ec-998f-979b98d5e4d7","type":"select","displayValue":"Automation Updated","structure":[]},{"id":"test_payload","value":"{\n  \"id\": \"65fcde14-0f45-41c4-9421-50a35dadaaaa\",\n  \"data\": {\n    \"id\": \"474263c5-6ae4-4ad0-a5f9-aef63fbdaaaa\",\n    \"name\": \"test\",\n    \"state\": \"available\",\n    \"ownerId\": \"4nzL7CHopk1Ps241hM78Lxvgr7Oiaaaa\",\n    \"runMode\": \"manual\",\n    \"spaceId\": null,\n    \"_updates\": [\n      {\n        \"path\": \"/createdAt\",\n        \"newValue\": \"2025-11-27T08:24:30.000000Z\",\n        \"oldValue\": \"2025-11-27T08:24:30.000000Z\"\n      },\n      {\n        \"path\": \"/updatedAt\",\n        \"newValue\": \"2025-11-27T12:06:01.000000Z\",\n        \"oldValue\": \"2025-11-27T08:24:30.000000Z\"\n      }\n    ],\n    \"tenantId\": \"MLyMpF08OWhHIKpYcaxPEQjaNaJgaaaa\",\n    \"createdAt\": \"2025-11-27T08:24:30.000000Z\",\n    \"lastRunAt\": null,\n    \"schedules\": [],\n    \"updatedAt\": \"2025-11-27T12:06:01.000000Z\",\n    \"snippetIds\": [],\n    \"description\": null,\n    \"endpointIds\": [],\n    \"connectorIds\": [],\n    \"lastRunStatus\": null,\n    \"containsBillable\": false,\n    \"maxConcurrentRuns\": 1\n  },\n  \"time\": \"2025-11-27T12:06:01.171Z\",\n  \"type\": \"com.qlik.v1.automation.updated\",\n  \"source\": \"com.qlik/automations\",\n  \"userid\": \"4nzL7CHopk1Ps241hM78Lxvgr7Oiaaaa\",\n  \"ownerid\": \"4nzL7CHopk1Ps241hM78Lxvgr7Oiaaaa\",\n  \"updates\": [\n    {\n      \"path\": \"/createdAt\",\n      \"newValue\": \"2025-11-27T08:24:30.000000Z\",\n      \"oldValue\": \"2025-11-27T08:24:30.000000Z\"\n    },\n    {\n      \"path\": \"/updatedAt\",\n      \"newValue\": \"2025-11-27T12:06:01.000000Z\",\n      \"oldValue\": \"2025-11-27T08:24:30.000000Z\"\n    }\n  ],\n  \"tenantid\": \"MLyMpF08OWhHIKpYcaxPEQjaNaJgaaaa\",\n  \"specversion\": \"1.0.2\",\n  \"datacontenttype\": \"application/json\"\n}","type":"json","structure":[]},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":15,"logo":"https://cdn.qlikcloud.com/automations/logos/a2649cabda63b339ebc68a0c8d028f08.png"},{"id":"A0A9FE9F-DDD7-421A-B67E-B71865A5318A","type":"EndpointBlock","disabled":false,"name":"getAutomation2","displayName":"Qlik Cloud Services - Get Automation 2","comment":"","childId":"00519E64-EB56-45D5-A295-6A09FE242212","inputs":[{"id":"637d42f0-cc60-11ec-ada3-9b34db8aacf6","value":"{$.AutomationUpdated.data.id}","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":1835,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"63599d90-cc60-11ec-8627-27701235d734","endpoint_role":"get"},{"id":"00519E64-EB56-45D5-A295-6A09FE242212","type":"SnippetBlock","disabled":false,"name":"CreateOrUpdateFileContent","displayName":"Git Hub - Create Or Update File Content","comment":"Specify the User and Repo parameters. The do lookup functionality is available for both.","childId":"3B8E6E9C-E197-4980-9FCB-8487A527AF5E","inputs":[{"id":"70b4a4c0-4074-11ec-a8e6-c1dc761dcfb1","value":"{$.Settings.GitHubUser}","type":"string","structure":[]},{"id":"70b5c000-4074-11ec-969e-792346f99f92","value":"{$.Settings.GitHubRepo}","type":"string","structure":[]},{"id":"70b63220-4074-11ec-b55b-7725e494603a","value":"Automations/{ $.getAutomation2.name }.json","type":"string","structure":[]},{"id":"b27fff40-4074-11ec-9f16-55d8428ec62c","value":"{$.Settings.GitHubBranch}","type":"string","structure":[]},{"id":"70b75130-4074-11ec-84ab-e102a3b0c185","value":"new version for the automation modified on { $.AutomationUpdated.data.updatedAt }","type":"string","structure":[]},{"id":"70b84f80-4074-11ec-9358-b5650774d83c","value":"{base64encode: { json: {$.getAutomation2.workspace} }}","type":"string","structure":[]},{"id":"09cb4810-1675-11ef-b5b9-9d279f1efa08","value":null,"type":"string","structure":[]},{"id":"09cc0110-1675-11ef-ad79-4d7c92bf3de3","value":null,"type":"string","structure":[]}],"settings":[{"id":"datasource","value":"6df3ac00-699b-4f69-8d24-f5a8baff4dbb","type":"select","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":1955,"datasourcetype_guid":"0d87808f-27c0-11ea-921c-022e6b5ea1e2","snippet_guid":"70a930c0-4074-11ec-9bb6-b36e27de5d04"},{"id":"24AB097E-30B5-416A-BF8E-998942195DC7","type":"VariableBlock","disabled":false,"name":"AutomationsToexport","displayName":"Variable - AutomationsToexport","comment":"**CONFIG ** - Add automationID to be in back up. To avoid backups on all publishes","childId":"0C0E82DD-770D-4C0E-B70C-08013BBA7C0F","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":135,"variableGuid":"B24F9964-718E-4145-9F50-15B1FB19CED7","operations":[{"id":"add_item","key":"74316E10-4248-475D-8F71-72C1066FACD5","name":"Add item to { variable }","value":"0b8af458-71a8-4935-8ece-eaac40f476ef"}]},{"id":"0C0E82DD-770D-4C0E-B70C-08013BBA7C0F","type":"VariableBlock","disabled":false,"name":"vCommit","displayName":"Variable - vCommit","comment":"","childId":"842D93B4-0850-4D40-AD43-7FAEDF4B4BB9","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":255,"variableGuid":"736C0FBC-292A-477A-B53F-5B97929AE25F","operations":[{"id":"empty","key":"D32F4660-58C3-471E-B5E1-5BCE645DA11C","name":"Empty { variable }","value":null}]},{"id":"842D93B4-0850-4D40-AD43-7FAEDF4B4BB9","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop","comment":"","childId":"5C6C6C09-68EC-4C94-84F1-F0823E323385","inputs":[{"id":"input","value":"{ $.AutomationsToexport }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":375,"loopBlockId":"2992463A-538D-452F-89DD-78AB047C007A"},{"id":"5C6C6C09-68EC-4C94-84F1-F0823E323385","type":"VariableBlock","disabled":false,"name":"Settings","displayName":"Variable - Settings","comment":"Fill in your GitHub details.","childId":"AA75C6E8-B90B-4253-9DF5-9BD44D05835A","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":1075,"variableGuid":"B8A177F9-8F70-4109-9D44-F045C51B9BFF","operations":[{"id":"set_key_value","key":"41A779AF-9C3B-4FC0-989D-DEC17502D5DF","name":"Set key/values of { variable }","value":[{"key":"GitHubUser","value":"KarlRikardLarsson"},{"key":"GitHubRepo","value":"Test"},{"key":"GitHubBranch","value":"main"}]}]},{"id":"AA75C6E8-B90B-4253-9DF5-9BD44D05835A","type":"IfElseBlock","disabled":false,"name":"condition3","displayName":"Condition 3","comment":"Was the correct app published? Specify the originAppId or the id from the attributes in the app published event as the second argument in the condition. ","childId":"A0A9FE9F-DDD7-421A-B67E-B71865A5318A","inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.vCommit }","input2":"Yes","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":464,"y":1195,"childTrueId":"B0D8A12A-2997-40B4-AA40-003F7EE97437","childFalseId":"A63C1C20-34E1-4FF1-AC0D-617647CF861F"},{"id":"B0D8A12A-2997-40B4-AA40-003F7EE97437","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"Correct app reloaded, start export.","childId":null,"inputs":[{"id":"input","value":"‚úÖ **Automation Published**\n`{ $.AutomationUpdated.data.name }` was successfully published.\nüöÄ Starting export to GitHub...","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":584,"y":1275},{"id":"A63C1C20-34E1-4FF1-AC0D-617647CF861F","type":"ShowBlock","disabled":false,"name":"output2","displayName":"Output 2","comment":"Different app reloaded, abort automation.","childId":"9C1A3F6A-1411-4992-BCB7-4D83E616303D","inputs":[{"id":"input","value":"‚ö†Ô∏è **Export Aborted**\nA different automation was published: `{ $.AutomationUpdated.data.name }`\nThis automation does not match the export criteria. No action taken.","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":584,"y":1435},{"id":"4A4A9511-4B1C-468B-9A8E-40FF54E72BCD","type":"StopBlock","disabled":false,"name":"stop","displayName":"Stop","comment":"Another app was published so stop the automation.","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":584,"y":1675},{"id":"2992463A-538D-452F-89DD-78AB047C007A","type":"IfElseBlock","disabled":false,"name":"condition4","displayName":"Condition 4","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.loop.item }","input2":"{ $.AutomationUpdated.data.id }","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":584,"y":475,"childTrueId":"CD87EFA9-A7DE-474E-970D-66A745ED26D5","childFalseId":"F61EE0BA-06E4-47CF-8FEB-2704B093D0E7"},{"id":"CD87EFA9-A7DE-474E-970D-66A745ED26D5","type":"VariableBlock","disabled":false,"name":"vCommit","displayName":"Variable - vCommit","comment":"","childId":"29633D61-ED42-4875-9717-07DD1B158190","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":704,"y":555,"variableGuid":"736C0FBC-292A-477A-B53F-5B97929AE25F","operations":[{"id":"set_value","key":"2BA480F0-3F47-425C-BEB6-17AB0085F8D5","name":"Set value of { variable }","value":"Yes"}]},{"id":"29633D61-ED42-4875-9717-07DD1B158190","type":"ForEachBreakBlock","disabled":false,"name":"exitLoop","displayName":"Exit Loop","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":704,"y":675},{"id":"F61EE0BA-06E4-47CF-8FEB-2704B093D0E7","type":"VariableBlock","disabled":false,"name":"vCommit","displayName":"Variable - vCommit","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":704,"y":835,"variableGuid":"736C0FBC-292A-477A-B53F-5B97929AE25F","operations":[{"id":"set_value","key":"2BA480F0-3F47-425C-BEB6-17AB0085F8D5","name":"Set value of { variable }","value":"No"}]},{"id":"3B8E6E9C-E197-4980-9FCB-8487A527AF5E","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle","displayName":"Update Run Title","comment":"","childId":null,"inputs":[{"id":"title","value":"**Published:** {$.AutomationUpdated.data.name}","type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":464,"y":2075},{"id":"9C1A3F6A-1411-4992-BCB7-4D83E616303D","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle2","displayName":"Update Run Title 2","comment":"","childId":"4A4A9511-4B1C-468B-9A8E-40FF54E72BCD","inputs":[{"id":"title","value":"**Skipped:** {$.AutomationUpdated.data.name}","type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":584,"y":1555}],"variables":[{"guid":"A2B5F577-A5E0-4413-8131-B23AA54E1686","name":"branchName","type":"string"},{"guid":"16225039-03BD-4646-8349-89DAFAC38DD3","name":"automationId","type":"string"},{"guid":"5DAA237A-1ACA-4A91-8009-7F88CC5F9C18","name":"repositoryName","type":"string"},{"guid":"14272657-EC1A-4368-ACA3-3FC73E60DE5D","name":"mainBranchName","type":"string"},{"guid":"7F7D1DED-7E06-4FF8-B088-93075F915CE1","name":"repositoryOwner","type":"string"},{"guid":"49212122-DA91-4A33-BC9F-3DB598475744","name":"automationExport","type":"object"},{"guid":"B8A177F9-8F70-4109-9D44-F045C51B9BFF","name":"Settings","type":"object"},{"guid":"736C0FBC-292A-477A-B53F-5B97929AE25F","name":"vCommit","type":"string"},{"guid":"B24F9964-718E-4145-9F50-15B1FB19CED7","name":"AutomationsToexport","type":"list"}]}
