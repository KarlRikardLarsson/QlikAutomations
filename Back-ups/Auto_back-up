{"blocks":[{"id":"85005812-11F4-4D96-B584-43D45724F9A0","type":"StartBlock","disabled":false,"name":"AppPublished","displayName":"App Published","comment":"","childId":"77B43FB4-D846-4A7F-8919-4920F95FA703","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":{}},{"id":"webhook_event_guid","value":"365616d0-889f-11eb-a6c1-0fbe0dacf886","type":"select","displayValue":"App Published","structure":{}},{"id":"webhook_param_613e0f80-5ddb-11ec-ab88-0d44ac0c427c","value":null,"type":"string","structure":{}},{"id":"test_payload","value":"{\n  \"data\": {\n    \"attributes\": {\n      \"id\": \"example_4f5e293f-613b-4b35-94fb-8d1f51e0cf38\",\n      \"name\": \"example_updated2\",\n      \"owner\": \"example_auth0|763f637f15d88fe64d40773c68ae258f5ed099e69436be138353a65b1ea7c2e6\",\n      \"originAppId\": \"example_d76ccd23-0383-4bcc-b2eb-0f0271d0e9aa\"\n    }\n  },\n  \"source\": \"com.qlik/engine\",\n  \"eventId\": \"example_6e1171a3-4cce-4492-b087-30482139d84f\",\n  \"eventTime\": \"2021-09-09T07:44:10Z\",\n  \"eventType\": \"com.qlik.v1.app.published\",\n  \"extensions\": {\n    \"userId\": \"example_BlVarUAUM9I0ei3MmKMejlDaF1sKPnN5\",\n    \"spaceId\": \"example_6138a349faed485d36ae912b\",\n    \"tenantId\": \"example_WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"contentType\": \"application/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","type":"json","structure":{}},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0,"logo":"https://cdn.qlikcloud.com/automations/logos/a2649cabda63b339ebc68a0c8d028f08.png"},{"id":"5F1C1D7D-A910-4134-9E94-BDB75201E42C","type":"EndpointBlock","disabled":false,"name":"listUsers","displayName":"Qlik Cloud Services - List Users","comment":"","childId":"C32DF557-BD6A-4364-B427-7C3B30DECAD4","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":{}},{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-61,"y":219,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"53ca52b0-6f83-11eb-b06c-c5bdc3525ce4","endpoint_role":"list"},{"id":"C32DF557-BD6A-4364-B427-7C3B30DECAD4","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter over Qlik Cloud Services - List Users - Filter List","comment":"","childId":"25D6BC4A-838F-41C6-8D85-9C801C17BE02","inputs":[{"id":"list","value":"{ $.listUsers }","type":"string","structure":{}},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"id","operator":"=","input2":"{ $.AppPublished.extensions.userId }"}]},"type":"custom","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-276,"y":204},{"id":"25D6BC4A-838F-41C6-8D85-9C801C17BE02","type":"SnippetBlock","disabled":false,"name":"exportAppToBase64EncodedFile","displayName":"Qlik Cloud Services - Export App To Base 64 Encoded File","comment":"","childId":"100BF5E7-F561-48EB-9E5D-031A663FF831","inputs":[{"id":"c0930c20-8645-11eb-8c79-17357db3794c","value":"{ $.AppPublished.data.attributes.id }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-264,"y":160,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"c08e2d30-8645-11eb-b98e-e77d5a1bebc3"},{"id":"100BF5E7-F561-48EB-9E5D-031A663FF831","type":"EndpointBlock","disabled":false,"name":"importAppFromBase64EncodedFile","displayName":"Qlik Cloud Services - Import App From Base 64 Encoded File","comment":"","childId":"5B2A4D24-1C68-40FA-9C4B-1A2505A1EA36","inputs":[{"id":"09b520a0-7aa4-11eb-8143-cde65e595ead","value":"{ $.exportAppToBase64EncodedFile }","type":"string","structure":{}},{"id":"19661000-67b1-11eb-b4c6-fb30d89c586f","value":"BackUp_{$.AppPublished.data.attributes.name} {date: 'now', 'Y-m-d'}","type":"string","structure":{}},{"id":"197675a0-67b1-11eb-b6f6-9ff3bc51ddbf","value":"{ $.TargetSpaceID }","type":"string","structure":{}},{"id":"4d3a3300-67b1-11eb-99af-3d55175faa9a","value":null,"type":"select","structure":{}},{"id":"ac4b58f0-67b1-11eb-8126-89d0cf328adb","value":"","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-263,"y":99,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"194b9430-67b1-11eb-9e04-6dbde84bea83","endpoint_role":"create"},{"id":"5B2A4D24-1C68-40FA-9C4B-1A2505A1EA36","type":"EndpointBlock","disabled":false,"name":"updateAppInformation","displayName":"Qlik Cloud Services - Update App Information","comment":"","childId":"F08B5FB5-4AFC-4789-81B5-13A43CF083E3","inputs":[{"id":"a6156420-67b3-11eb-815f-65756e72b0f1","value":"{ $.importAppFromBase64EncodedFile.attributes.id }","type":"string","structure":{}},{"id":"63937820-67b3-11eb-9c5c-0d2a56f1870e","value":"","type":"string","structure":{}},{"id":"639a6a60-67b3-11eb-856d-95777eda7ab3","value":"This is a copy back-up of {$.AppPublished.data.attributes.name}. Back up was created {date: 'now', 'Y-m-d'} by { $.filterList[0].name }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-255,"y":86,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"63801c20-67b3-11eb-a170-2fbd938493ff","endpoint_role":"update"},{"id":"77B43FB4-D846-4A7F-8919-4920F95FA703","type":"VariableBlock","disabled":false,"name":"","displayName":"Variable - ","comment":"","childId":"5F1C1D7D-A910-4134-9E94-BDB75201E42C","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-1,"y":142,"variableGuid":"0A85AF37-F801-4610-87FD-A5D9EADFAD2D","operations":[{"key":"4A2C140D-AC6E-4179-ACA8-6ED935E4B2AB","id":"set_value","name":"Set value of { variable }","value":"673700a17644a75c464a596f"}]},{"id":"F08B5FB5-4AFC-4789-81B5-13A43CF083E3","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"Get tenant hostname for use in the output blocks","childId":"A6BE30EA-A411-45B9-9940-A66E66510C8B","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":302.940956680832,"y":865.6450995548452,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"5CADED29-4E97-42D1-87B4-5B6F073ABDF9","type":"VariableBlock","disabled":false,"name":"","displayName":"Variable - ","comment":"","childId":"80A19550-06B2-4DFE-82A6-C92C43E5FC4E","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":283,"y":161,"variableGuid":"B43154F8-C985-4DE7-8EB1-98573149CF72","operations":[{"id":"set_value","key":"98A567AC-27C8-49E4-9C54-FC30E3666BC8","name":"Set value of { variable }","value":"https://{ if: { $.getCurrentTenantInfo.hostnames[1] } empty , $.getCurrentTenantInfo.hostnames[0], $.getCurrentTenantInfo.hostnames[1] }"}]},{"id":"80A19550-06B2-4DFE-82A6-C92C43E5FC4E","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":"A2D65A97-365D-43B0-A5A8-4C59E3E77B63","inputs":[{"id":"input","value":"âœ… **Backup Complete**\nA backup of {$.AppPublished.data.attributes.name} has been created successfully in space { $.getSpace.name }.  \nYou can access it here:\nðŸ”— [Open Backup App]({ $.tenantHostname }/sense/app/{ $.importAppFromBase64EncodedFile.attributes.id })","type":"string","structure":{}}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-615.4885403289345,"y":627.6063067021969},{"id":"A2D65A97-365D-43B0-A5A8-4C59E3E77B63","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle","displayName":"Update Run Title","comment":"","childId":null,"inputs":[{"id":"title","value":"App:{$.AppPublished.data.attributes.name}. Back up was created {date: 'now', 'Y-m-d'} by {$.filterList[0].name}","type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-611.5669800744266,"y":720.7433627467592},{"id":"A6BE30EA-A411-45B9-9940-A66E66510C8B","type":"EndpointBlock","disabled":false,"name":"getSpace","displayName":"Qlik Cloud Services - Get Space","comment":"","childId":"5CADED29-4E97-42D1-87B4-5B6F073ABDF9","inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{ $.TargetSpaceID }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-628.2336111560851,"y":722.7041428740131,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"}],"variables":[{"guid":"0A85AF37-F801-4610-87FD-A5D9EADFAD2D","name":"TargetSpaceID","type":"string"},{"guid":"B43154F8-C985-4DE7-8EB1-98573149CF72","name":"tenantHostname","type":"string"}]}
