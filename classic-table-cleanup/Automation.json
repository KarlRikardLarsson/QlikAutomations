{"blocks":[{"id":"1901BBA4-F21E-406B-831B-944834817E5B","type":"StartBlock","disabled":false,"name":"Start","displayName":"Start","comment":"","childId":"D6144E31-AB9B-4453-A4C3-E9570E0D99FB","inputs":[{"id":"run_mode","value":"manual","type":"select","structure":{}}],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0},{"id":"0C38BD37-16FE-4A11-A3DE-AD8B0E8CE7BF","type":"IfElseBlock","disabled":false,"name":"condition82","displayName":"Condition 82","comment":"Check if the sheets should be scanned or not based on the \"Scan Base Sheets Only\" user input.","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ lowercase: {$.OnlyScanPublishedSheets} }","input2":"{text: {$.ListSheets.item.qMeta.published}}","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":true}],"x":0,"y":400,"childTrueId":"929B35EE-E22E-4D87-A76D-7AF6A7E0A117","childFalseId":null},{"id":"1B66DC77-EDAF-4717-B866-DA59EDA5E0A9","type":"SnippetBlock","disabled":false,"name":"ListSheets","displayName":"Qlik Cloud Services - List Sheets","comment":"","childId":null,"inputs":[{"id":"e9e6c2e0-1fa5-11eb-b780-556801493651","value":"{ $.GetAppInformation.info.attributes.id }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":435,"y":992,"loopBlockId":"0C38BD37-16FE-4A11-A3DE-AD8B0E8CE7BF","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"c3eca7d0-188a-11eb-a972-933bbe8b97a3"},{"id":"1F096936-2100-4030-B618-02F5FFD58552","type":"VariableBlock","disabled":false,"name":"OnlyScanPublishedSheets","displayName":"Variable - OnlyScanPublishedSheets","comment":"Always: True","childId":"2EEBCC14-2125-4DF1-9906-21E0004E910F","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-348,"y":365,"variableGuid":"5AB87417-2111-481E-9676-6D762164E6C1","operations":[{"id":"set_value","key":"5BD434EA-6333-4FE4-91D3-388C2FB107E6","name":"Set value of { variable }","value":"True"}]},{"id":"929B35EE-E22E-4D87-A76D-7AF6A7E0A117","type":"SnippetBlock","disabled":false,"name":"ListObjectsOnSheet","displayName":"Qlik Cloud Services - List Objects On Sheet","comment":"List all Objects for each Sheet.","childId":null,"inputs":[{"id":"0915c380-1fa6-11eb-8101-73bd233c1b3f","value":"{ $.GetAppInformation.info.attributes.id }","type":"string","structure":[]},{"id":"09166b00-1fa6-11eb-91b7-69dfbb5b9656","value":"{$.ListSheets.item.qInfo.qId}","type":"string","structure":[]},{"id":"639c5dd0-d628-11ee-9599-97f15f3b6f7d","value":null,"type":"select","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":120,"y":540,"loopBlockId":"A498FF04-A984-4497-BC85-DA7996116827","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"f27f2ba0-1895-11eb-850b-317a7898e2a2"},{"id":"A498FF04-A984-4497-BC85-DA7996116827","type":"IfElseBlock","disabled":false,"name":"condition","displayName":"Condition","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.ListObjectsOnSheet.item.type }","input2":"table","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-468,"y":681,"childTrueId":"40EB7C56-B442-4826-8118-391DEB82458F","childFalseId":null},{"id":"72848B72-3D24-4DB2-9052-32776AB616BC","type":"EndpointBlock","disabled":false,"name":"listApps","displayName":"Qlik Cloud Services - List Apps","comment":"","childId":null,"inputs":[{"id":"8cd8db50-107b-11ec-8082-edc45dd151ef","value":null,"type":"select","structure":[]},{"id":"8ce4fad0-107b-11ec-a6ac-2bd407ad134b","value":"{ $.loop.item }","type":"string","structure":[]}],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":860,"loopBlockId":"74F096E4-7CD3-48E6-97A7-4CDA11523F55","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"8cc63340-107b-11ec-ab5d-f9b221ed2dc5","endpoint_role":"list"},{"id":"268916F3-11B4-4F8B-B889-D4836A178EEC","type":"EndpointBlock","disabled":false,"name":"listSpaces","displayName":"Qlik Cloud Services - List Spaces","comment":"","childId":"1F096936-2100-4030-B618-02F5FFD58552","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":[]},{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":240,"loopBlockId":"ABC44565-3AC3-4BCB-9C47-214C1A74CB50","datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"42815920-5f18-11eb-8321-91b1587b6c06","endpoint_role":"list"},{"id":"ABC44565-3AC3-4BCB-9C47-214C1A74CB50","type":"IfElseBlock","disabled":false,"name":"condition2","displayName":"Condition 2","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ $.listSpaces.item.type }","input2":"managed","operator":"="}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-815,"y":280,"childTrueId":"6B5EE718-3064-4863-B739-D139C9A9549A","childFalseId":null},{"id":"6B5EE718-3064-4863-B739-D139C9A9549A","type":"VariableBlock","disabled":false,"name":"TargetSpaceIDs","displayName":"Variable - TargetSpaceIDs","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-830,"y":282,"variableGuid":"BD835F14-1921-42A5-9DAD-BE867A31CF3F","operations":[{"id":"add_item","key":"AC4EE7AC-C78E-48C6-B941-73B276D14364","name":"Add item to { variable }","value":"{ $.listSpaces.item.id }"}]},{"id":"2EEBCC14-2125-4DF1-9906-21E0004E910F","type":"ForEachBlock","disabled":false,"name":"loop","displayName":"Loop","comment":"","childId":"40C6F3C7-E61F-4498-AA8E-76D20A39079F","inputs":[{"id":"input","value":"{ $.TargetSpaceIDs }","type":"string","structure":[]}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-645,"y":640,"loopBlockId":"72848B72-3D24-4DB2-9052-32776AB616BC"},{"id":"203F9B3A-1726-4673-B58C-637A8C2DB97B","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":"FB26ADB1-D669-4325-B688-CAC2982CFAA0","inputs":[{"id":"input","value":"### Found { count: { $.deduplicateList } } Tables:\n\n| App | Sheet | Link | Origin App |\n| --- | ----- | ---- | ---------- |","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2500},{"id":"74F096E4-7CD3-48E6-97A7-4CDA11523F55","type":"SnippetBlock","disabled":false,"name":"GetAppInformation","displayName":"Qlik Cloud Services - Get App Information","comment":"","childId":"1B66DC77-EDAF-4717-B866-DA59EDA5E0A9","inputs":[{"id":"d3acbdc0-a8d2-11eb-8827-056900eab788","value":"{ $.listApps.item.id }","type":"string","structure":[]}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-459,"y":808,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"d3a8d4f0-a8d2-11eb-a81d-ffabb68491fb"},{"id":"40C6F3C7-E61F-4498-AA8E-76D20A39079F","type":"DeduplicateListBlock","disabled":false,"name":"deduplicateList","displayName":"Deduplicate List","comment":"","childId":"A89309C2-7F92-4187-9C98-8E9DC1113155","inputs":[{"id":"list","value":"{ $.SheetsWithTable }","type":"string","structure":[]},{"id":"key","value":null,"type":"field","structure":[]}],"settings":[{"id":"case_insensitive","value":null,"type":"checkbox","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":2620,"loopBlockId":null},{"id":"40EB7C56-B442-4826-8118-391DEB82458F","type":"VariableBlock","disabled":false,"name":"SheetsWithTable","displayName":"Variable - SheetsWithTable","comment":"","childId":null,"inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-237,"y":1391,"variableGuid":"DC147A8B-C849-414A-BB9A-E020282EB771","operations":[{"id":"add_item","key":"33C0D3BF-5946-47C5-8540-54EB627E3C63","name":"Add item to { variable }","value":"| {$.GetAppInformation.info.attributes.name} | {$.ListSheets.item.qMeta.title} | [Link to Sheet]({$.tenantHostname}/sense/app/{$.GetAppInformation.info.attributes.id}/sheet/{$.ListSheets.item.qInfo.qId}) | [Link to sheet in origin app]({$.tenantHostname}/sense/app/{$.GetAppInformation.info.attributes.originAppId}/sheet/{$.ListSheets.item.qInfo.qId}) |"}]},{"id":"D6144E31-AB9B-4453-A4C3-E9570E0D99FB","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"Get tenant hostname for use in the output blocks","childId":"03BE4C54-A492-41FC-A6A3-B3A7EE34F385","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":396,"y":-33,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"03BE4C54-A492-41FC-A6A3-B3A7EE34F385","type":"VariableBlock","disabled":false,"name":"tenantHostname","displayName":"Variable - tenantHostname","comment":"","childId":"268916F3-11B4-4F8B-B889-D4836A178EEC","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":283,"y":161,"variableGuid":"3FDDA91C-3E4C-4A17-AAC6-B5C1F42403DA","operations":[{"id":"set_value","key":"98A567AC-27C8-49E4-9C54-FC30E3666BC8","name":"Set value of { variable }","value":"https://{ if: { $.getCurrentTenantInfo.hostnames[1] } empty , $.getCurrentTenantInfo.hostnames[0], $.getCurrentTenantInfo.hostnames[1] }"}]},{"id":"A89309C2-7F92-4187-9C98-8E9DC1113155","type":"IfElseBlock","disabled":false,"name":"condition3","displayName":"Condition 3","comment":"","childId":null,"inputs":[{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"{ count: { $.deduplicateList } }","input2":"0","operator":">"}]},"type":"custom","structure":[]}],"settings":[],"collapsed":[{"name":"both","isCollapsed":false},{"name":"yes","isCollapsed":false},{"name":"no","isCollapsed":false}],"x":-494,"y":2127,"childTrueId":"203F9B3A-1726-4673-B58C-637A8C2DB97B","childFalseId":null},{"id":"FB26ADB1-D669-4325-B688-CAC2982CFAA0","type":"ShowBlock","disabled":false,"name":"output2","displayName":"Output 2","comment":"","childId":null,"inputs":[{"id":"input","value":"{ replace: {implode: { $.deduplicateList }}, ',', '{ linebreak }' }","type":"string","structure":[]}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":392,"y":2606}],"variables":[{"guid":"5AB87417-2111-481E-9676-6D762164E6C1","name":"OnlyScanPublishedSheets","type":"string"},{"guid":"BD835F14-1921-42A5-9DAD-BE867A31CF3F","name":"TargetSpaceIDs","type":"list"},{"guid":"DC147A8B-C849-414A-BB9A-E020282EB771","name":"SheetsWithTable","type":"list"},{"guid":"7D9F0CE1-F9BB-489D-9CA6-E098381B5C9B","name":"SheetTable","type":"object"},{"guid":"58F8791D-796D-4D29-AE8C-78B891289DF9","name":"SheetWithTableOriginApp","type":"list"},{"guid":"3FDDA91C-3E4C-4A17-AAC6-B5C1F42403DA","name":"tenantHostname","type":"string"}]}
