{"blocks":[{"id":"F2ECE1F6-1CE3-4E09-B43D-F7BFFA5462CF","type":"StartBlock","disabled":false,"name":"AppPublished","displayName":"App Published","comment":"","childId":"9D049290-CAC3-41F9-B75F-67C27023E70A","inputs":[{"id":"run_mode","value":"webhook","type":"select","structure":{}},{"id":"datasourcetype_guid","value":"61a87510-c7a3-11ea-95da-0fb0c241e75c","type":"select","displayValue":"Qlik Cloud Services","structure":{}},{"id":"webhook_event_guid","value":"365616d0-889f-11eb-a6c1-0fbe0dacf886","type":"select","displayValue":"App Published","structure":{}},{"id":"webhook_param_613e0f80-5ddb-11ec-ab88-0d44ac0c427c","value":null,"type":"string","structure":{}},{"id":"test_payload","value":"{\n  \"data\": {\n    \"attributes\": {\n      \"id\": \"example_4f5e293f-613b-4b35-94fb-8d1f51e0cf38\",\n      \"name\": \"example_updated2\",\n      \"owner\": \"example_auth0|763f637f15d88fe64d40773c68ae258f5ed099e69436be138353a65b1ea7c2e6\",\n      \"originAppId\": \"example_d76ccd23-0383-4bcc-b2eb-0f0271d0e9aa\"\n    }\n  },\n  \"source\": \"com.qlik/engine\",\n  \"eventId\": \"example_6e1171a3-4cce-4492-b087-30482139d84f\",\n  \"eventTime\": \"2021-09-09T07:44:10Z\",\n  \"eventType\": \"com.qlik.v1.app.published\",\n  \"extensions\": {\n    \"userId\": \"example_BlVarUAUM9I0ei3MmKMejlDaF1sKPnN5\",\n    \"spaceId\": \"example_6138a349faed485d36ae912b\",\n    \"tenantId\": \"example_WL69WlNT4PRbwAA8EZ1sDblqjthluHL1\"\n  },\n  \"contentType\": \"application/json\",\n  \"eventTypeVersion\": \"1.0.0\",\n  \"cloudEventsVersion\": \"0.1\"\n}","type":"json","structure":{}},{"id":"webhook_documentation","value":null,"type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":0,"y":0,"logo":"https://cdn.qlikcloud.com/automations/logos/a2649cabda63b339ebc68a0c8d028f08.png"},{"id":"8923A33C-54D6-4B12-AD1F-4316123DEDA0","type":"EndpointBlock","disabled":false,"name":"listUsers","displayName":"Qlik Cloud Services - List Users","comment":"","childId":"A7EECFAC-F01B-476E-A197-F8FD4EAA5BAC","inputs":[],"settings":[{"id":"maxitemcount","value":"","type":"string","structure":{}},{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":183,"y":460,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"53ca52b0-6f83-11eb-b06c-c5bdc3525ce4","endpoint_role":"list"},{"id":"A7EECFAC-F01B-476E-A197-F8FD4EAA5BAC","type":"FilterListBlock","disabled":false,"name":"filterList","displayName":"Filter over Qlik Cloud Services - List Users - Filter List","comment":"","childId":"38722080-6756-4E75-91DF-BDB427E901A9","inputs":[{"id":"list","value":"{ $.listUsers }","type":"string","structure":{}},{"id":"conditions","value":{"mode":"all","conditions":[{"input1":"id","operator":"=","input2":"{ $.AppPublished.extensions.userId }"}]},"type":"custom","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":true}],"x":-276,"y":204},{"id":"38722080-6756-4E75-91DF-BDB427E901A9","type":"SnippetBlock","disabled":false,"name":"exportAppToBase64EncodedFile","displayName":"Qlik Cloud Services - Export App To Base 64 Encoded File","comment":"","childId":"71A5C263-FEA3-401B-93BF-27B429F87206","inputs":[{"id":"c0930c20-8645-11eb-8c79-17357db3794c","value":"{ $.AppPublished.data.attributes.id }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-264,"y":160,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","snippet_guid":"c08e2d30-8645-11eb-b98e-e77d5a1bebc3"},{"id":"71A5C263-FEA3-401B-93BF-27B429F87206","type":"EndpointBlock","disabled":false,"name":"importAppFromBase64EncodedFile","displayName":"Qlik Cloud Services - Import App From Base 64 Encoded File","comment":"","childId":"8311BDD0-05B9-4F81-B4B8-8A06F2A27284","inputs":[{"id":"09b520a0-7aa4-11eb-8143-cde65e595ead","value":"{ $.exportAppToBase64EncodedFile }","type":"string","structure":{}},{"id":"19661000-67b1-11eb-b4c6-fb30d89c586f","value":"BackUp_{$.AppPublished.data.attributes.name} {date: 'now', 'Y-m-d'}","type":"string","structure":{}},{"id":"197675a0-67b1-11eb-b6f6-9ff3bc51ddbf","value":"{ $.TargetSpaceID }","type":"string","structure":{}},{"id":"4d3a3300-67b1-11eb-99af-3d55175faa9a","value":null,"type":"select","structure":{}},{"id":"ac4b58f0-67b1-11eb-8126-89d0cf328adb","value":null,"type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-263,"y":99,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"194b9430-67b1-11eb-9e04-6dbde84bea83","endpoint_role":"create"},{"id":"8311BDD0-05B9-4F81-B4B8-8A06F2A27284","type":"EndpointBlock","disabled":false,"name":"updateAppInformation","displayName":"Qlik Cloud Services - Update App Information","comment":"","childId":"DE09EEAB-EC4F-487C-B0E7-D6D942B7BF75","inputs":[{"id":"a6156420-67b3-11eb-815f-65756e72b0f1","value":"{ $.importAppFromBase64EncodedFile.attributes.id }","type":"string","structure":{}},{"id":"63937820-67b3-11eb-9c5c-0d2a56f1870e","value":null,"type":"string","structure":{}},{"id":"639a6a60-67b3-11eb-856d-95777eda7ab3","value":"This is a copy back-up of {$.AppPublished.data.attributes.name}. Back up was created {date: 'now', 'Y-m-d'} by { $.filterList[0].name }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-255,"y":86,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"63801c20-67b3-11eb-a170-2fbd938493ff","endpoint_role":"update"},{"id":"9D049290-CAC3-41F9-B75F-67C27023E70A","type":"VariableBlock","disabled":false,"name":"TargetSpaceID","displayName":"Variable - TargetSpaceID","comment":"","childId":"8923A33C-54D6-4B12-AD1F-4316123DEDA0","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-820,"y":238,"variableGuid":"3ADF687E-D4E3-44A3-A26C-CCADFD3A4F44","operations":[{"key":"4A2C140D-AC6E-4179-ACA8-6ED935E4B2AB","id":"set_value","name":"Set value of { variable }","value":"673700a17644a75c464a596f"}]},{"id":"DE09EEAB-EC4F-487C-B0E7-D6D942B7BF75","type":"EndpointBlock","disabled":false,"name":"getCurrentTenantInfo","displayName":"Qlik Cloud Services - Get Current Tenant Info","comment":"Get tenant hostname for use in the output blocks","childId":"E6F27583-0425-4230-A5A8-7F5BF3D60BB5","inputs":[],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":[]},{"id":"cache","value":"0","type":"select","structure":[]},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":[]}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":302.940956680832,"y":865.6450995548452,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"55051480-cb86-11ec-b746-892c1d04114e","endpoint_role":"get"},{"id":"671637EC-490F-4567-8408-84361E52A180","type":"VariableBlock","disabled":false,"name":"tenantHostname","displayName":"Variable - tenantHostname","comment":"","childId":"8EBA1AE7-161D-4B7E-B29D-67B5FC57D5C7","inputs":[],"settings":[],"collapsed":[{"name":"loop","isCollapsed":false}],"x":283,"y":161,"variableGuid":"8B28BF3C-57DF-4E93-BFC2-25F8467B3F18","operations":[{"id":"set_value","key":"98A567AC-27C8-49E4-9C54-FC30E3666BC8","name":"Set value of { variable }","value":"https://{ if: { $.getCurrentTenantInfo.hostnames[1] } empty , $.getCurrentTenantInfo.hostnames[0], $.getCurrentTenantInfo.hostnames[1] }"}]},{"id":"8EBA1AE7-161D-4B7E-B29D-67B5FC57D5C7","type":"ShowBlock","disabled":false,"name":"output","displayName":"Output","comment":"","childId":"22EAA904-FFC3-485A-AF84-23B498AC21AB","inputs":[{"id":"input","value":"âœ… **Backup Complete**\nA backup of {$.AppPublished.data.attributes.name} has been created successfully in space { $.getSpace.name }.  \nYou can access it here:\nðŸ”— [Open Backup App]({ $.tenantHostname }/sense/app/{ $.importAppFromBase64EncodedFile.attributes.id })","type":"string","structure":{}}],"settings":[{"id":"display_mode","value":"add","type":"select","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-615.4885403289345,"y":627.6063067021969},{"id":"22EAA904-FFC3-485A-AF84-23B498AC21AB","type":"UpdateJobBlock","disabled":false,"name":"updateRunTitle","displayName":"Update Run Title","comment":"","childId":null,"inputs":[{"id":"title","value":"App:{$.AppPublished.data.attributes.name}. Back up was created {date: 'now', 'Y-m-d'} by {$.filterList[0].name}","type":"string","structure":{}}],"settings":[{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-611.5669800744266,"y":720.7433627467592},{"id":"E6F27583-0425-4230-A5A8-7F5BF3D60BB5","type":"EndpointBlock","disabled":false,"name":"getSpace","displayName":"Qlik Cloud Services - Get Space","comment":"","childId":"671637EC-490F-4567-8408-84361E52A180","inputs":[{"id":"92f7bcd0-6d2d-11eb-9088-69419de8f253","value":"{ $.TargetSpaceID }","type":"string","structure":{}}],"settings":[{"id":"blendr_on_error","value":"stop","type":"select","structure":{}},{"id":"cache","value":"0","type":"select","structure":{}},{"id":"automations_censor_data","value":false,"type":"checkbox","structure":{}}],"collapsed":[{"name":"loop","isCollapsed":false}],"x":-628.2336111560851,"y":722.7041428740131,"datasourcetype_guid":"61a87510-c7a3-11ea-95da-0fb0c241e75c","endpoint_guid":"92afefd0-6d2d-11eb-aee2-055653605a8e","endpoint_role":"get"}],"variables":[{"guid":"3ADF687E-D4E3-44A3-A26C-CCADFD3A4F44","name":"TargetSpaceID","type":"string"},{"guid":"8B28BF3C-57DF-4E93-BFC2-25F8467B3F18","name":"tenantHostname","type":"string"}]}
